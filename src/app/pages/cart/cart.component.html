<div class="container mt-4">
  <h2 class="cart-title-h2 mb-4">ðŸ›’ Carrito de Juegos</h2>

  <mat-spinner *ngIf="isLoading" diameter="50" class="mx-auto d-block"></mat-spinner>

  <div *ngIf="!isLoading && juegos.length === 0" class="cart-unfilled text-center text-muted">
    No tienes juegos en tu carrito.
  </div>

  <div *ngFor="let juego of juegos" class="mb-3">
    <mat-card class="mat-card-container">
      <mat-card-content class="d-flex justify-content-between align-items-center">

        <!-- Imagen + nombre juego -->
        <div class="d-flex align-items-center flex-grow-1">
          <img
            [src]="juego.imageBase64 ? 'data:' + juego.imageContentType + ';base64,' + juego.imageBase64 : 'https://picsum.photos/350/120'"
            alt="{{ juego.gamename }}"
            class="juego-img me-3"
          />
          <h5 class="juego-nombre mb-0">{{ juego.gamename }}</h5>
        </div>
  
        <!-- Precio -->
        <div class="text-end me-3">
          <p class="price-txt mb-0">Precio: ${{ juego.price ?? 0 | number: '1.2-2' }}</p> <!-- Redondeado -->
        </div>

        <button mat-icon-button color="warn" (click)="removeFromCart(juego.id)" matTooltip="Quitar del carrito">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-card-content>
    </mat-card>
  </div>

  <mat-divider class="my-4"></mat-divider>

  <div *ngIf="juegos.length > 0" class="text-end">
    <h4 class="cart-total-price mb-2">Total: <strong>${{ total | number: '1.2-2' }}</strong></h4>
    <button mat-raised-button color="primary" (click)="checkout()">
      <mat-icon>shopping_cart_checkout</mat-icon> Finalizar compra
    </button>
  </div>
</div>