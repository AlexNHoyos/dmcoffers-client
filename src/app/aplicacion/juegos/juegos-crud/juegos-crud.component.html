<div>

  <div class="title-crud">
    <h3>Juegos</h3>
  </div>

  <div class="row filtroCrud">
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title> FILTROS </mat-panel-title>
      </mat-expansion-panel-header>

      <form #filterForm="ngForm" (ngSubmit)="aplicarFiltro()">

        <!-- Fechas -->
        <div class="row mb-3">
          <h4 class="col-12 mb-2">Fecha de lanzamiento</h4>
          <mat-form-field appearance="outline" class="col-6">
            <!-- Label para pantallas grandes -->
            <mat-label class="d-none d-md-block">Fecha desde</mat-label>
            <!-- Label para pantallas chicas -->
            <mat-label class="d-block d-md-none">Desde</mat-label>
            <input matInput [matDatepickerFilter]="filterDesde" [matDatepicker]="pickerDesde" [(ngModel)]="filterFechaDesde" name="fechaDesde" />
            <mat-datepicker-toggle matIconSuffix [for]="pickerDesde"></mat-datepicker-toggle>
            <mat-datepicker #pickerDesde></mat-datepicker>

          </mat-form-field>

          <mat-form-field appearance="outline" class="col-6">
            <mat-label class="d-none d-md-block">Fecha hasta</mat-label>
            <mat-label class="d-block d-md-none">Hasta</mat-label>
            <input matInput [matDatepickerFilter]="filterHasta" [matDatepicker]="pickerHasta" [(ngModel)]="filterFechaHasta" name="fechaHasta"/>
            <mat-datepicker-toggle matIconSuffix [for]="pickerHasta"></mat-datepicker-toggle>
            <mat-datepicker #pickerHasta></mat-datepicker>

          </mat-form-field>
        </div>

        <!-- Desarrollador y Publicador -->
        <div class="row mb-3">
          <mat-form-field appearance="outline" class="col-12 col-md-4">
            <mat-label>Desarrollador</mat-label>
            <mat-select [(ngModel)]="filterDesarrollador" name="developername">
              <mat-option [value]="''">Todos</mat-option>
              <mat-option *ngFor="let dev of desarrolladores" [value]="dev.developername">
                {{ dev.developername }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="col-12 col-md-4">
            <mat-label>Publicador</mat-label>
            <mat-select [(ngModel)]="filterPublicador" name="publishername">
              <mat-option [value]="''">Todos</mat-option>
              <mat-option *ngFor="let pub of publicadores" [value]="pub.publishername">
                {{ pub.publishername }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <!-- Categorías -->
          <mat-form-field appearance="outline" class="col-12 col-md-4">
            <mat-label>Categoría</mat-label>
            <mat-select [(ngModel)]="filterCategorias" name="categorias" multiple>
              <mat-option *ngFor="let cat of categorias" [value]="cat">
                {{ cat }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        
        <!-- Rango de precio -->
        <div class="row col-12 mb-3">
          <mat-label>Rango de precio</mat-label>
            <mat-slider style="width: 100%;  " min="0" max="100" step="1" thumbLabel>
              <input matSliderStartThumb [(ngModel)]="filterPrecio.start" name="precioStart" [ngModelOptions]="{standalone: true}">
              <input matSliderEndThumb [(ngModel)]="filterPrecio.end" name="precioEnd" [ngModelOptions]="{standalone: true}">
            </mat-slider>
            <p>
              Precio desde: {{ filterPrecio.start | currency:'USD' }} -
              hasta: {{ filterPrecio.end | currency:'USD' }}
            </p>
        </div>

        <!-- Botones -->
        <div class="row justify-content-end mb-2">
            <div col-12 col-md-3 d-flex justify-content-between>
            <button class="col-1" mat-button type="button" (click)="resetFiltro()"
              style="margin-right: 1%;">Limpiar</button>
            <button class="col-1" mat-raised-button color="primary" (click)="aplicarFiltro()">Buscar</button>
          </div>
          </div>
      </form>
    </mat-expansion-panel>
  </mat-accordion>
  </div>




  <div class="tabla-crud normal-table">
    <table mat-table [dataSource]="juegosFiltrados" class="mat-elevation-z8 ">
      <!-- ID  -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef style="width: 10%;">ID</th>
        <td mat-cell *matCellDef="let row" style="width: 10%; text-align: center;">{{ row.id }}</td>
      </ng-container>

      <!-- Nombre -->
      <ng-container matColumnDef="gamename">
        <th mat-header-cell *matHeaderCellDef style="width: 80%;">Nombre</th>
        <td mat-cell *matCellDef="let row" style="width: 80%; padding-left: 30%;">
          {{ row.gamename }}
        </td>
      </ng-container>

      <!--  Acciones -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef style="width: 10%;">Acciones</th>
        <td mat-cell *matCellDef="let row" style="width: 10%; text-align: center;">
          <button mat-icon-button color="primary" (click)="showDetails(row.id)">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button color="primary" (click)="openEditDialog(row.id)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="openDeleteDialog(row.id)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <button class="add-btn" mat-icon-button color="primary" aria-label="Añadir" (click)="openCreateDialog()"
      style="background-color: #bc71fe; margin-top: 1vh;">
      <mat-icon>add</mat-icon>
    </button>
  </div>
  <!-- Seguir modificando desde esta seccion -->
</div>