<form [formGroup]="registerForm" (ngSubmit)="register()">
  <mat-card class="register-card">
    <mat-card-header class="register-card-header">
      <mat-card-title class="register-card-title"
        >CREA TU CUENTA</mat-card-title
      >
    </mat-card-header>

    <mat-card-content>
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Usuario</mat-label>
        <input
          matInput
          formControlName="username"
          placeholder="Ingrese su usuario"
        />
      </mat-form-field>
      
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Correo Electrónico</mat-label>
        <input
          matInput
          formControlName="email"
          type="email"
          placeholder="Ingrese su correo electrónico"
          required
        />
        <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
          El correo electrónico es requerido.
        </mat-error>
        <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
          Formato de correo electrónico inválido.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Contraseña</mat-label>
        <input
          matInput
          formControlName="password"
          type="password"
          placeholder="Ingrese su contraseña"
          required
        />
        <mat-error
          *ngIf="
            this.registerForm.controls['password'].value !=
            this.registerForm.controls['password2'].value
          "
        >
          Las contraseñas deben coincidir.
        </mat-error>
        <mat-error
          *ngIf="this.registerForm.controls['password'].value.length < 8"
        >
          La contraseña debe tener al menos 8 caracteres.
        </mat-error>
        <mat-error
          *ngIf="registerForm.controls['password'].hasError('noUpperCase')"
        >
          {{ registerForm.controls["password"].getError("noUpperCase") }}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Confirma tu contraseña</mat-label>
        <input
          matInput
          formControlName="password2"
          type="password"
          placeholder="Repita su contraseña"
          required
        />
        <mat-error
          *ngIf="
            this.registerForm.controls['password'].value !=
            this.registerForm.controls['password2'].value
          "
        >
          Las contraseñas deben coincidir.
        </mat-error>
        <mat-error
          *ngIf="this.registerForm.controls['password2'].value.length < 8"
        >
          La contraseña debe tener al menos 8 caracteres.
        </mat-error>
      </mat-form-field>

      <mat-form-field class="full-width">
        <mat-label>Fecha de nacimiento</mat-label>
        <input
          matInput
          [matDatepicker]="picker"
          formControlName="birth_date"
          name="birth_date"
          [max]="today"
        />
        <mat-hint>DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            Información adicional (opcional)
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Nombre</mat-label>
            <input
              matInput
              formControlName="realname"
              type="text"
              placeholder="Nombre"
            />
          </mat-form-field>

          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Apellido</mat-label>
            <input
              matInput
              formControlName="surname"
              type="text"
              placeholder="Apellido"
            />
          </mat-form-field>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-content>

    <mat-card-actions>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="register-button"
        [disabled]="registerForm.invalid"
      >
        Registrarse
      </button>
    </mat-card-actions>
  </mat-card>
</form>
